# Python 3.x é€ŸæŸ¥æ‰‹å†Œï¼ˆæ´»é¡µæœ¬ï¼‰

ä»¥ä¸‹æ˜¯ç”¨äºè®¾è®¡ã€ŠPythoné€ŸæŸ¥æ‰‹å†Œï¼ˆæ´»é¡µæœ¬ï¼‰ã€‹çš„æ–‡å­—ç¨¿ï¼Œæˆ‘åˆæ­¥å°†è¯¥æ‰‹å†Œåˆ’åˆ†ä¸º 12 ä¸ªæ´»é¡µåŠ ä¸€ä¸ªå°é¢ï¼ˆå¦‚æœéœ€è¦å°é¢çš„è¯ï¼‰ï¼Œæ¯é¡µéƒ½è®¾ç½®æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ä¸»é¢˜ï¼Œå„ä¸ªæ´»é¡µä¹‹é—´ç”¨åˆ†éš”çº¿ï¼ˆå³`---`ï¼‰éš”å¼€ã€‚

---

## å°é¢ï¼ˆå¦‚éœ€è¦ï¼‰ï¼šPython 3.x é€ŸæŸ¥æ‰‹å†Œ

### é€‚ç”¨äººç¾¤

- Python åˆå­¦è€…ï¼ˆå…¥é—¨åé˜¶æ®µï¼‰
- åœ¨ç”¨ Python çš„å¼€å‘è€… / å­¦ç”Ÿ
- éœ€è¦å¿«é€Ÿå›å¿†è¯­æ³•çš„å·¥ç¨‹å®è·µè€…

### å†…å®¹è¦†ç›–èŒƒå›´

- Python 3.x æ ¸å¿ƒè¯­æ³•ä¸è¯­è¨€æœºåˆ¶
- å†…ç½®æ•°æ®ç±»å‹ä¸å¸¸ç”¨æ•°æ®ç»“æ„
- å‡½æ•°ã€æ¨¡å—ã€å¼‚å¸¸ã€æ–‡ä»¶æ“ä½œ
- æ¨å¯¼å¼ã€ç”Ÿæˆå™¨ã€è£…é¥°å™¨ç­‰å…³é”®é«˜çº§ç‰¹æ€§

> æœ¬æ‰‹å†Œ **ä¸æ˜¯æ•™ç¨‹**ï¼Œè€Œæ˜¯ **é€ŸæŸ¥å‚è€ƒå·¥å…·**

### ä½¿ç”¨è¯´æ˜

- æ¯ä¸€é¡µä¸º **ç‹¬ç«‹ä¸»é¢˜æ´»é¡µ**
- å¯å•é¡µç¿»é˜…ã€å¹³é“ºæŸ¥æ‰¾
- é€‚åˆæ‰“å°ã€è£…è®¢æˆ–è¦†è†œä½¿ç”¨
- ç¤ºä¾‹ä»£ç å‡å¯ç›´æ¥è¿è¡Œï¼ˆPython 3.xï¼‰

### ç‰ˆæœ¬ä¸è§„èŒƒè¯´æ˜

- **é€‚ç”¨ç‰ˆæœ¬**ï¼šPython 3.8+
- **è¯­æ³•é£æ ¼**ï¼šéµå¾ª PEP 8
- **ç±»å‹æç¤º**ï¼šåŒ…å« Python 3.5+ æ³¨è§£å†™æ³•
- **è”åˆç±»å‹**ï¼šæ¶µç›– `Union` ä¸ `|`ï¼ˆ3.10+ï¼‰

### Â© ç‰ˆæƒä¸å£°æ˜ï¼ˆç¤ºä¾‹ï¼‰

> Â© 2026
> æœ¬æ‰‹å†Œç”¨äºå­¦ä¹ ä¸æ•™å­¦å‚è€ƒ
> Python ä¸º Python Software Foundation çš„æ³¨å†Œå•†æ ‡

---

## æ´»é¡µ01ï¼šåŸºç¡€è¯­æ³•é€Ÿè§ˆ

### å…³é”®ç‰¹æ€§é€Ÿè§ˆ

- è§£é‡Šå‹ã€è·¨å¹³å°
- å¼ºè°ƒå¯è¯»æ€§ï¼ˆç¼©è¿›ï¼‰
- åŠ¨æ€ç±»å‹ã€å¼ºç±»å‹
- ä¸°å¯Œæ ‡å‡†åº“ï¼ˆbatteries includedï¼‰

### ç¼©è¿›è§„åˆ™

> Python ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºä»£ç å—ï¼Œè€ŒéèŠ±æ‹¬å· `{}`ã€‚

#### åŸºæœ¬è§„åˆ™

- **æ¨èç¼©è¿›ï¼š4 ä¸ªç©ºæ ¼**
- åŒä¸€ä»£ç å— **ç¼©è¿›å¿…é¡»ä¸€è‡´**
- ä¸æ¨èä½¿ç”¨ Tabï¼Œè‹¥ä½¿ç”¨ Tab åˆ™éœ€ç»Ÿä¸€è®¾ç½® Tab ä¸º 4 ä¸ªç©ºæ ¼

#### ä»£ç ç¤ºä¾‹

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""æ¨¡å—ç®€çŸ­æè¿°ï¼ˆä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²ï¼‰"""

# å¯¼å…¥æ¨¡å—
import os
import sys

# ç¼–å†™ç¨‹åºä»£ç 
if x > 0:
    print("positive")
    if x > 10:
        print("large")

for i in range(10):
    print(i)

# è®¾ç½®ç¨‹åºå…¥å£
if __name__ == "__main__":
    pass
```

#### å¸¸è§é”™è¯¯

- âŒï¸ ç¼©è¿›å±‚çº§ä¸ä¸€è‡´
- âŒï¸ Tab ä¸ç©ºæ ¼æ··ç”¨
- âŒï¸ åœ¨ä¸éœ€è¦ä»£ç å—çš„åœ°æ–¹ç¼©è¿›

### æ³¨é‡Šæ–¹å¼

#### å•è¡Œæ³¨é‡Š

```python
# è¿™æ˜¯å•è¡Œæ³¨é‡Š
```

#### è¡Œå†…æ³¨é‡Š

```python
x = 10  # åˆå§‹åŒ–å˜é‡
```

#### æ–‡æ¡£å­—ç¬¦ä¸²

```python
def add(a, b):
    """è¿”å› a ä¸ b çš„å’Œ"""
    return a + b
```

> ğŸ“Œ æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆDocstringï¼‰å¯è¢«`help()` å’Œ IDE è¯†åˆ«
> ğŸ“Œ ä½¿ç”¨ä¸‰å¼•å· `""" """`

### ä»£ç å—ç»“æ„

#### å¸¸è§ä»£ç å—èµ·å§‹å…³é”®å­—

- `if / elif / else`
- `for / while`
- `def`
- `class`
- `try / except / finally`
- `with`

#### ç»Ÿä¸€ç»“æ„

```python
å…³é”®å­— æ¡ä»¶:
    ä»£ç å—
```

### é¡¹ç›®ç»„ç»‡ç»“æ„

```bash
è„šæœ¬ï¼ˆscriptï¼‰
â”‚
â”œâ”€ æ¨¡å—ï¼ˆmoduleï¼‰  â†’  .py æ–‡ä»¶
â”‚
â””â”€ åŒ…ï¼ˆpackageï¼‰   â†’  ç”¨äºç»„ç»‡æ¨¡å—çš„ç›®å½•ï¼ˆ__init__.py å¯é€‰ï¼‰
```

| ç»“æ„ | è¯´æ˜                        |
| ---- | --------------------------- |
| è„šæœ¬ | ç›´æ¥è¿è¡Œçš„ Python æ–‡ä»¶      |
| æ¨¡å— | å¯è¢« import çš„ .py æ–‡ä»¶     |
| åŒ…   | ç»„ç»‡æ¨¡å—çš„ç›®å½•ç»“æ„          |

### ä¿ç•™å­—/å…³é”®å­—é€Ÿè§ˆï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰

> å…³é”®å­—ä¸èƒ½ä½œä¸ºå˜é‡åã€å‡½æ•°åæˆ–ç±»åã€‚  
> å¯ç”¨`import keyword`æˆ–`keyword.kwlist`æŸ¥çœ‹å½“å‰ Python ç‰ˆæœ¬çš„å…³é”®å­—åˆ—è¡¨ã€‚

#### é€»è¾‘ä¸æ§åˆ¶

```python
if  elif  else  for  while  break  continue  pass async  await
```

#### å‡½æ•°ä¸ç±»

```python
def  return  lambda  class  yield
```

#### å¼‚å¸¸ä¸ä¸Šä¸‹æ–‡

```python
try  except  finally  raise  with  as
```

#### é€»è¾‘è¿ç®—

```python
and  or  not  in  is
```

#### ä½œç”¨åŸŸä¸å¯¼å…¥

```python
import  from  global  nonlocal
```

#### å¸¸é‡ä¸ç‰¹æ®Šå€¼

```python
True  False  None
```

### é€ŸæŸ¥æç¤º

- â— ç¼©è¿›é”™è¯¯æ˜¯ **SyntaxError** çš„å¸¸è§æ¥æº
- â— å…³é”®å­—å¤§å°å†™æ•æ„Ÿï¼ˆ`True` â‰  `true`ï¼‰
- âœ…ï¸ æ¨èä½¿ç”¨ç¼–è¾‘å™¨çš„è‡ªåŠ¨ç¼©è¿›ä¸è¯­æ³•æ£€æŸ¥åŠŸèƒ½
- âœ…ï¸ æ¨èåœ¨æ¨¡å—å¼€å¤´è®¾ç½®æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œä»¥ä¾¿äº IDE å’Œ`help()`è¯†åˆ«

---

## æ´»é¡µ02ï¼šå˜é‡ä¸å‘½åè§„åˆ™

### å‘½åè§„èŒƒï¼ˆPEP 8ï¼‰

> å‘½åéœ€ä»¥å¯è¯»æ€§ä¸ºä¼˜å…ˆï¼Œå¹¶éµå¾ªä¸€è‡´æ€§åŸåˆ™ã€‚

#### åŸºæœ¬çº¦å®š

| å¯¹è±¡ç±»å‹    | å‘½åå½¢å¼         | ç¤ºä¾‹              |
| ----------- | ---------------- | ----------------- |
| å˜é‡ / å‡½æ•° | `snake_case`     | `total_count`     |
| å¸¸é‡        | `UPPER_CASE`     | `MAX_SIZE`        |
| ç±»          | `PascalCase`     | `UserAccount`     |
| æ¨¡å—        | `snake_case`     | `math_utils.py`   |
| åŒ…          | å°å†™             | `utils`           |

#### ä¸æ¨èå†™æ³•

- âŒï¸ ä½¿ç”¨æ‹¼éŸ³æˆ–æ— æ„ä¹‰ç¼©å†™
- âŒï¸ å•å­—ç¬¦å˜é‡åï¼ˆå¾ªç¯è®¡æ•°å™¨é™¤å¤–ï¼‰
- âŒï¸ ä¸å†…ç½®åç§°å†²çªï¼ˆå¦‚`list`, `str`ï¼‰

### å˜é‡ç»‘å®šä¸åŠ¨æ€ç±»å‹

> **Python ä¸­å˜é‡æ˜¯â€œåå­—â€ï¼Œä¸æ˜¯â€œç›’å­â€**

#### å˜é‡ç»‘å®šç¤ºæ„

```text
x â†’ å¯¹è±¡ï¼ˆobjectï¼‰ â†’  ç±»å‹ï¼ˆtypeï¼‰
```

```python
x = 10        # x ç»‘å®šåˆ° int å¯¹è±¡
x = "hello"   # x é‡æ–°ç»‘å®šåˆ° str å¯¹è±¡
```

- å˜é‡æœ¬èº« **ä¸ä¿å­˜ç±»å‹**
- ç±»å‹å±äºå¯¹è±¡ï¼Œè€Œéå˜é‡å

### ä½œç”¨åŸŸè§„åˆ™ï¼ˆLEGBï¼‰

> **æŸ¥æ‰¾å˜é‡åçš„é¡ºåº**

```text
Local  â†’  Enclosing  â†’  Global  â†’  Built-in
```

#### ä»£ç ç¤ºä¾‹

```python
x = 1

def outer():
    x = 2
    def inner():
        print(x)
    inner()
```

è¾“å‡ºï¼š

```text
2
```

### global ä¸ nonlocal

#### global

```python
count = 0

def inc():
    global count
    count += 1
```

- ä¿®æ”¹æ¨¡å—çº§å˜é‡
- ä¸å½±å“å†…ç½®ä½œç”¨åŸŸ

#### nonlocal

```python
def outer():
    x = 0
    def inner():
        nonlocal x
        x += 1
```

- ä¿®æ”¹å¤–å±‚å‡½æ•°å˜é‡
- ä»…ç”¨äºåµŒå¥—å‡½æ•°

### å¸¸è§å‘½åé”™è¯¯

- âŒï¸ è¦†ç›–å†…ç½®åç§°

  ```python
  list = [1, 2, 3]
  ```

- âŒï¸ åœ¨ä¸åŒä½œç”¨åŸŸä¸­æ»¥ç”¨åŒåå˜é‡
- âŒï¸ ä½¿ç”¨æœªå®šä¹‰å˜é‡ï¼ˆNameErrorï¼‰

### é€ŸæŸ¥æç¤º

- â— å˜é‡å¿…é¡»å…ˆç»‘å®šåä½¿ç”¨
- â— `global` / `nonlocal` æ˜¯**ä½œç”¨åŸŸå£°æ˜**ï¼Œä¸æ˜¯èµ‹å€¼
- âœ…ï¸ æ¨èä½¿ç”¨ `isinstance()` è¿›è¡Œç±»å‹åˆ¤æ–­

---

## æ´»é¡µ03ï¼šå†…ç½®æ•°æ®ç±»å‹é€ŸæŸ¥

### æ•°å€¼ç±»å‹

#### `int`

```python
a = 10
b = -3
c = 0
```

- ä»»æ„ç²¾åº¦ï¼ˆæ— æº¢å‡ºï¼‰
- æ”¯æŒäºŒè¿›åˆ¶ / å…«è¿›åˆ¶ / åå…­è¿›åˆ¶è¡¨ç¤º

```python
0b1010   # 10
0o12     # 10
0xA      # 10
```

#### `float`

```python
x = 3.14
y = 1e-3
```

- åŸºäº IEEE 754
- å­˜åœ¨ç²¾åº¦è¯¯å·®

```python
0.1 + 0.2 == 0.3   # False
```

#### `complex`

```python
z = 1 + 2j
```

- `j` è¡¨ç¤ºè™šéƒ¨
- å¸¸ç”¨äºç§‘å­¦è®¡ç®—

### å¸ƒå°”ç±»å‹

#### `bool`

```python
True
False
```

- ä»…æœ‰ä¸¤ä¸ªå€¼
- ç»“æœæ¥è‡ªæ¯”è¾ƒæˆ–é€»è¾‘è¿ç®—

```python
x > 0
a == b
```

#### `bool`ä¸`int`çš„å…³ç³»

> **`bool`æ˜¯`int`çš„å­ç±»**

```python
isinstance(True, int)   # True
```

```python
True == 1    # True
False == 0   # True
```

- å¯å‚ä¸ç®—æœ¯è¿ç®—
- ä¸æ¨èä¾èµ–è¯¥è¡Œä¸ºè¿›è¡Œé€»è¾‘åˆ¤æ–­

### æ–‡æœ¬ç±»å‹

#### `str`

```python
s1 = "hello"
s2 = 'world'
s3 = """å¤šè¡Œå­—ç¬¦ä¸²"""
```

- ä¸å¯å˜ï¼ˆimmutableï¼‰
- åŸºäº Unicode

```python
len("ä½ å¥½")   # 2
```

### ç©ºå€¼ç±»å‹

#### `None`

```python
x = None
```

- è¡¨ç¤ºâ€œæ— å€¼â€æˆ–â€œæœªè®¾ç½®â€
- å”¯ä¸€å®ä¾‹

```python
x is None    # æ¨è
```

âŒï¸ ä¸æ¨èï¼š

```python
x == None
```

### ç±»å‹æ£€æŸ¥ä¸è½¬æ¢

#### æŸ¥çœ‹ç±»å‹

```python
type(x)
isinstance(x, int)
```

#### å¸¸è§ç±»å‹è½¬æ¢

```python
int("10")
float("3.14")
str(123)
bool(0)
```

âš ï¸ è½¬æ¢å¤±è´¥ä¼šæŠ›å‡º`ValueError`

### çœŸå€¼åˆ¤æ–­

> **ä»¥ä¸‹å€¼åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­ä¸º`False`**

```text
False
None
0
0.0
0j
""  (ç©ºå­—ç¬¦ä¸²)
[]  {}  set()
```

å…¶ä½™å¯¹è±¡é»˜è®¤ä¸º`True`

### é€ŸæŸ¥æç¤º

- â— `None`ä¸æ˜¯`0`ï¼Œä¹Ÿä¸æ˜¯`False`
- â— æµ®ç‚¹æ•°æ¯”è¾ƒåº”ä½¿ç”¨å®¹å·®ï¼ˆå¦‚`math.isclose`ï¼‰
- âœ…ï¸ åˆ¤æ–­â€œæ˜¯å¦ä¸º`None`â€ä½¿ç”¨`is`

---

## æ´»é¡µ04ï¼šæ ¸å¿ƒæ•°æ®ç»“æ„å¯¹ç…§è¡¨

### å››å¤§å†…ç½®å®¹å™¨æ€»è§ˆ

| ç±»å‹            | æ˜¯å¦æœ‰åº   | æ˜¯å¦å¯å˜ | æ˜¯å¦å¯é‡å¤ | å…¸å‹ç”¨é€”                   |
| --------------- | ---------- | -------- | ---------- | -------------------------- |
| `list`ï¼ˆåˆ—è¡¨ï¼‰  | âœ…ï¸         | âœ…ï¸       | âœ…ï¸         | é¡ºåºæ•°æ®ã€å¯ä¿®æ”¹é›†åˆ       |
| `tuple`ï¼ˆå…ƒç¥–ï¼‰ | âœ…ï¸         | âŒï¸       | âœ…ï¸         | ä¸å¯å˜è®°å½•ã€å‡½æ•°è¿”å›å€¼     |
| `set`ï¼ˆé›†åˆï¼‰   | âŒï¸         | âœ…ï¸       | âŒï¸         | å»é‡ã€é›†åˆè¿ç®—             |
| `dict` ï¼ˆå­—å…¸ï¼‰ | âœ…ï¸ï¼ˆ3.7+ï¼‰ | âœ…ï¸       | é”®ä¸å¯é‡å¤ | é”®å€¼æ˜ å°„ã€ç»“æ„åŒ–æ•°æ®       |

> ğŸ“Œ `dict`åœ¨ Python 3.7+ ä¸­**ä¿æŒæ’å…¥é¡ºåº**

### `list`

```python
lst = [1, 2, 3]
```

#### å¸¸ç”¨åˆ—è¡¨æ–¹æ³•

```python
lst.append(x)
lst.extend(iterable)
lst.insert(i, x)
lst.pop()
lst.remove(x)
lst.sort()
lst.reverse()
```

- æ”¯æŒç´¢å¼•ä¸åˆ‡ç‰‡
- é€‚åˆé¢‘ç¹ä¿®æ”¹

### `tuple`

```python
t = (1, 2, 3)
```

```python
t = 1, 2, 3    # æ‰“åŒ…
a, b, c = t    # è§£åŒ…
```

- ä¸å¯å˜
- å¯ä½œä¸º`dict`çš„é”®

```python
d = {(1, 2): "point"}
```

### `set`

```python
s = {1, 2, 3}
```

- æ— åº
- å…ƒç´ å¿…é¡»å¯å“ˆå¸Œ

#### å¸¸ç”¨é›†åˆè¿ç®—

```python
a | b    # å¹¶é›†
a & b    # äº¤é›†
a - b    # å·®é›†
a ^ b    # å¯¹ç§°å·®é›†
```

### `dict`

```python
d = {"a": 1, "b": 2}
```

#### å¸¸ç”¨å­—å…¸æ–¹æ³•

```python
d.get(key, default)
d.keys()
d.values()
d.items()
d.pop(key)
d.update(other)
```

#### éå†æ¨¡æ¿

```python
for k, v in d.items():
    ...
```

### å¯å˜æ€§å¯¹æ¯”ï¼ˆé‡ç‚¹ï¼‰

```python
lst[0] = 10        # âœ…ï¸
t[0] = 10          # âŒï¸ TypeError
```

```python
s.add(4)           # âœ…ï¸
d["c"] = 3         # âœ…ï¸
```

> âš ï¸ **å¯å˜å¯¹è±¡ä½œä¸ºå‡½æ•°é»˜è®¤å‚æ•°æ˜¯å¸¸è§é™·é˜±**

### ç±»å‹æ³¨è§£ä¸­çš„å¸¸è§å†™æ³•ï¼ˆPython 3.9+ï¼‰

```python
list[int]
tuple[str, int]
set[str]
dict[str, int]
```

#### Python 3.8 åŠä¹‹å‰

```python
from typing import List, Dict

List[int]
Dict[str, int]
```

### é€ŸæŸ¥æç¤º

- â— `[]` â‰  `{}`ï¼ˆåè€…æ˜¯ç©ºå­—å…¸ï¼‰
- âœ…ï¸ éœ€è¦é¡ºåº + å¯ä¿®æ”¹ â†’ `list`
- âœ…ï¸ éœ€è¦ä¸å¯å˜è®°å½• â†’ `tuple`
- âœ…ï¸ éœ€è¦å»é‡ / æˆå‘˜æµ‹è¯• â†’ `set`
- âœ…ï¸ éœ€è¦é”®å€¼æ˜ å°„ â†’ `dict`

---

## æ´»é¡µ05ï¼šæ¡ä»¶ä¸å¾ªç¯æ¨¡æ¿

### æ¡ä»¶åˆ¤æ–­ï¼š`if / elif / else`

#### åŸºæœ¬æ¨¡æ¿

```python
if condition:
    ...
elif other_condition:
    ...
else:
    ...
```

- æ¡ä»¶è¡¨è¾¾å¼ä¸º **å¸ƒå°”ä¸Šä¸‹æ–‡**
- æ— éœ€æ‹¬å· `()`

### å¸ƒå°”ä¸Šä¸‹æ–‡

ä»¥ä¸‹å€¼åœ¨æ¡ä»¶åˆ¤æ–­ä¸­ä¸º`False`ï¼š

```python
False
None
0
0.0
""
[]
()
{}
set()
```

> ğŸ“Œ **éç©ºå¯¹è±¡é»˜è®¤è§†ä¸º`True`**

### é“¾å¼æ¯”è¾ƒ

```python
0 < x < 10
```

ç­‰ä»·äºï¼š

```python
0 < x and x < 10
```

### `for`å¾ªç¯

#### åŸºæœ¬æ¨¡æ¿

```python
for item in iterable:
    ...
```

#### å¸¸è§æ­é…

```python
for i in range(5):
    ...
```

```python
for i, v in enumerate(seq):
    ...
```

```python
for a, b in zip(xs, ys):
    ...
```

### `while`å¾ªç¯

```python
while condition:
    ...
```

- æ¡ä»¶ä¸º`False`æ—¶é€€å‡º
- æ˜“å‡ºç°æ­»å¾ªç¯

```python
while True:
    if done:
        break
```

### å¾ªç¯æ§åˆ¶è¯­å¥

```python
break      # è·³å‡ºå¾ªç¯
continue   # è·³è¿‡æœ¬æ¬¡
pass       # å ä½ï¼Œä¸åšä»»ä½•äº‹
```

### `for â€“ else`

```python
for x in data:
    if x == target:
        break
else:
    print("not found")
```

- `else` **åªåœ¨æœªè§¦å‘`break`æ—¶æ‰§è¡Œ**
- å¸¸ç”¨äºæŸ¥æ‰¾é€»è¾‘

### æ¡ä»¶è¡¨è¾¾å¼ï¼ˆä¸‰å…ƒè¡¨è¾¾å¼ï¼‰

```python
result = a if cond else b
```

### å¸¸è§é”™è¯¯å¯¹ç…§

```python
if x = 1:        # âŒï¸ èµ‹å€¼
```

```python
if x == 1:       # âœ…ï¸ æ¯”è¾ƒ
```

```python
if x is 1:       # âŒï¸
```

```python
if x == 1:       # âœ…ï¸
```

> ğŸ“Œ `is` ç”¨äºå¯¹è±¡èº«ä»½åˆ¤æ–­ï¼Œä¸ç”¨äºæ•°å€¼æ¯”è¾ƒ

### é€ŸæŸ¥æç¤º

- âœ…ï¸ ä¼˜å…ˆä½¿ç”¨`for`ï¼Œå…¶æ¬¡`while`
- âœ…ï¸ ä½¿ç”¨`enumerate`ä»£æ›¿`range(len())`
- â— `break`ä¼šå½±å“`for-else`è¡Œä¸º
- â— æ³¨æ„ç¼©è¿›å±‚çº§ï¼Œé¿å…é€»è¾‘é”™ä½

---

## æ´»é¡µ06ï¼šå‡½æ•°ä¸å‚æ•°æœºåˆ¶

### å‡½æ•°å®šä¹‰ï¼ˆ`def`ï¼‰

```python
def func(a, b):
    return a + b
```

- ä½¿ç”¨`return`è¿”å›ç»“æœ
- æœªæ˜¾å¼`return` â†’ è¿”å›`None`

### å‚æ•°ç±»å‹æ€»è§ˆï¼ˆä»å·¦åˆ°å³ï¼‰

```python
def f(pos, /, std, default=1, *args, kw, **kwargs):
    ...
```

| å‚æ•°ç±»å‹       | ç¤ºä¾‹        | è¯´æ˜                |
| -------------- | ----------- | ------------------- |
| ä½ç½®ä¸“ç”¨       | `pos, /`    | åªèƒ½æŒ‰ä½ç½®ä¼ å‚      |
| ä½ç½® / å…³é”®å­—  | `std`       | æœ€å¸¸è§              |
| é»˜è®¤å‚æ•°       | `default=1` | è°ƒç”¨æ—¶å¯çœç•¥        |
| å¯å˜ä½ç½®å‚æ•°   | `*args`     | æ¥æ”¶å¤šä½™ä½ç½®å‚æ•°    |
| ä»…å…³é”®å­—å‚æ•°   | `kw`        | å¿…é¡»ç”¨ `kw=...`     |
| å¯å˜å…³é”®å­—å‚æ•° | `**kwargs`  | æ¥æ”¶å¤šä½™å…³é”®å­—å‚æ•°  |

> ğŸ“Œ `/`ï¼ˆä½ç½®ä¸“ç”¨ï¼‰è‡ª Python 3.8 å¼•å…¥

### é»˜è®¤å‚æ•°é™·é˜±ï¼ˆé‡ç‚¹ï¼‰

```python
def bad(x, lst=[]):      # âŒï¸
    lst.append(x)
    return lst
```

```python
def good(x, lst=None):   # âœ…ï¸
    if lst is None:
        lst = []
    lst.append(x)
    return lst
```

### å‚æ•°è§£åŒ…ï¼ˆè°ƒç”¨æ—¶ï¼‰

```python
args = (1, 2)
kwargs = {"c": 3}

f(*args, **kwargs)
```

### è¿”å›å¤šä¸ªå€¼ï¼ˆå®ä¸ºå…ƒç»„ï¼‰

```python
def divmod(a, b):
    return a // b, a % b
```

```python
q, r = divmod(7, 3)
```

### ç±»å‹æç¤ºï¼ˆPython 3.5+ï¼‰

```python
def add(a: int, b: int) -> int:
    return a + b
```

- **ä¸ä¼šåœ¨è¿è¡ŒæœŸå¼ºåˆ¶æ£€æŸ¥**
- ä¾› IDE / ç±»å‹æ£€æŸ¥å™¨ä½¿ç”¨

### å¸¸è§ç±»å‹æ³¨è§£ç¤ºä¾‹

```python
def f(xs: list[int]) -> dict[str, int]:
    ...
```

```python
from typing import Optional

def g(x: Optional[int]) -> int:
    ...
```

### è”åˆç±»å‹

#### ä¼ ç»Ÿå†™æ³•ï¼ˆâ‰¤ 3.9ï¼‰

```python
from typing import Union

def f(x: Union[int, str]):
    ...
```

#### æ–°å†™æ³•ï¼ˆ3.10+ï¼‰

```python
def f(x: int | str):
    ...
```

### å¯è°ƒç”¨å¯¹è±¡

```python
from collections.abc import Callable

def apply(f: Callable[[int], int], x: int) -> int:
    return f(x)
```

### é€ŸæŸ¥æç¤º

- â— é»˜è®¤å‚æ•°åªåœ¨**å®šä¹‰æ—¶**æ±‚å€¼
- âœ…ï¸ è¿”å›å¤šä¸ªå€¼æœ¬è´¨æ˜¯`tuple`
- âœ…ï¸ ä½¿ç”¨ç±»å‹æç¤ºæé«˜å¯è¯»æ€§
- â— ç±»å‹æ³¨è§£ â‰  è¿è¡Œæ—¶æ£€æŸ¥

## æ´»é¡µ07ï¼šæ¨¡å—ã€åŒ…ä¸å¯¼å…¥è§„åˆ™

### æ¨¡å—

> **ä¸€ä¸ª`.py`æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—**

```python
import math
math.sqrt(4)
```

```python
from math import sqrt
sqrt(4)
```

### å¸¸è§å¯¼å…¥å½¢å¼å¯¹ç…§

| å†™æ³•              | è¯´æ˜         | å»ºè®®        |
| ----------------- | ------------ | ----------- |
| `import m`        | å¯¼å…¥æ•´ä¸ªæ¨¡å— | âœ…ï¸ æ¨è     |
| `import m as x`   | æ¨¡å—åˆ«å     | âœ…ï¸ å¸¸ç”¨     |
| `from m import f` | å¯¼å…¥æˆå‘˜     | âš ï¸ è°¨æ…     |
| `from m import *` | å…¨é‡å¯¼å…¥     | âŒï¸ ä¸æ¨è   |

### æ¨¡å—æœç´¢è·¯å¾„ï¼ˆ`sys.path`ï¼‰

```python
import sys
sys.path
```

æœç´¢é¡ºåºï¼ˆç®€åŒ–ï¼‰ï¼š

1. å½“å‰è„šæœ¬ç›®å½•
2. `PYTHONPATH`
3. æ ‡å‡†åº“
4. site-packages

> ğŸ“Œ å¯¼å…¥å¤±è´¥é€šå¸¸æ˜¯ **è·¯å¾„é—®é¢˜**

### åŒ…

> **åŒ…æ˜¯ç»„ç»‡æ¨¡å—çš„ç›®å½•**

```text
mypkg/
â”‚
â”œâ”€ __init__.py
â”œâ”€ a.py
â””â”€ b.py
```

```python
from mypkg import a
from mypkg.b import func
```

- Python 3.3+ æ”¯æŒ **éšå¼å‘½åç©ºé—´åŒ…**
- ä½†å·¥ç¨‹ä¸­ä»æ¨èä¿ç•™`__init__.py`

### `__name__ == "__main__"`

```python
if __name__ == "__main__":
    main()
```

| åœºæ™¯     | `__name__`   |
| -------- | ------------ |
| ç›´æ¥è¿è¡Œ | `"__main__"` |
| è¢«å¯¼å…¥   | æ¨¡å—å       |

> ğŸ“Œ ç”¨äºåŒºåˆ† **è„šæœ¬å…¥å£*- ä¸ **å¯å¤ç”¨æ¨¡å—**

### ç›¸å¯¹å¯¼å…¥ï¼ˆåŒ…å†…ï¼‰

```python
from . import a
from ..utils import helper
```

- åªèƒ½åœ¨åŒ…å†…ä½¿ç”¨
- ä¸èƒ½ç›´æ¥è¿è¡ŒåŒ…å«ç›¸å¯¹å¯¼å…¥çš„æ¨¡å—

### å¯¼å…¥é¡ºåºï¼ˆPEP 8ï¼‰

```python
# 1. æ ‡å‡†åº“
import os
import sys

# 2. ç¬¬ä¸‰æ–¹åº“
import requests

# 3. æœ¬åœ°æ¨¡å—
from . import utils
```

### å¸¸è§å¯¼å…¥é”™è¯¯

```python
ImportError
ModuleNotFoundError
```

å¸¸è§åŸå› ï¼š

- æ¨¡å—åä¸æ–‡ä»¶åå†²çª
- è¿è¡Œè·¯å¾„ä¸æ­£ç¡®
- ç›¸å¯¹å¯¼å…¥è¯¯ç”¨

### é€ŸæŸ¥æç¤º

- âœ…ï¸ ä¼˜å…ˆä½¿ç”¨`import module`
- â— é¿å…`import *`
- âœ…ï¸ å·¥ç¨‹ç»“æ„æ¯”æŠ€å·§æ›´é‡è¦
- â— æ¨¡å—åä¸è¦ä¸æ ‡å‡†åº“é‡åï¼ˆå¦‚`random.py`ï¼‰

---

## æ´»é¡µ08ï¼šå¼‚å¸¸å¤„ç†é€ŸæŸ¥

### åŸºæœ¬ç»“æ„ï¼š`try / except / else / finally`

```python
try:
    risky()
except ValueError:
    handle()
else:
    success()
finally:
    cleanup()
```

| å—        | ä½•æ—¶æ‰§è¡Œ     |
| --------- | ------------ |
| `try`     | æ­£å¸¸æ‰§è¡Œä»£ç  |
| `except`  | æ•è·å¼‚å¸¸     |
| `else`    | æ— å¼‚å¸¸æ—¶æ‰§è¡Œ |
| `finally` | æ— è®ºæ˜¯å¦å¼‚å¸¸ |

### æ•è·å¤šä¸ªå¼‚å¸¸

```python
except (TypeError, ValueError):
    ...
```

```python
except Exception as e:
    print(e)
```

> âš ï¸ **é¿å…ç›´æ¥æ•è·`Exception`ï¼ˆé™¤éè¾¹ç•Œå±‚ï¼‰**

### å¸¸è§å†…ç½®å¼‚å¸¸é€Ÿè§ˆ

| å¼‚å¸¸                | è§¦å‘åœºæ™¯       |
| ------------------- | -------------- |
| `ValueError`        | å€¼åˆæ³•ä½†ä¸åˆé€‚ |
| `TypeError`         | ç±»å‹ä¸åŒ¹é…     |
| `IndexError`        | ä¸‹æ ‡è¶Šç•Œ       |
| `KeyError`          | å­—å…¸é”®ä¸å­˜åœ¨   |
| `AttributeError`    | å±æ€§ä¸å­˜åœ¨     |
| `FileNotFoundError` | æ–‡ä»¶ä¸å­˜åœ¨     |
| `ZeroDivisionError` | é™¤é›¶           |

### ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼š`raise`

```python
if x < 0:
    raise ValueError("x must be >= 0")
```

### å¼‚å¸¸é“¾

```python
try:
    int("x")
except ValueError as e:
    raise RuntimeError("parse failed") from e
```

- ä¿ç•™åŸå§‹å¼‚å¸¸ä¸Šä¸‹æ–‡
- ä¾¿äºè°ƒè¯•

### è‡ªå®šä¹‰å¼‚å¸¸

```python
class MyError(Exception):
    pass
```

```python
raise MyError("something wrong")
```

- ç»§æ‰¿è‡ª`Exception`
- ç”¨äºè¡¨è¾¾ä¸šåŠ¡è¯­ä¹‰

### `finally`ä¸èµ„æºæ¸…ç†

```python
f = open("data.txt")
try:
    ...
finally:
    f.close()
```

> âœ…ï¸ æ›´æ¨èä½¿ç”¨`with`

### `else`çš„å…¸å‹ç”¨æ³•

```python
try:
    x = int(s)
except ValueError:
    return None
else:
    return x
```

- æŠŠ **æ­£å¸¸é€»è¾‘*- ä¸ **å¼‚å¸¸å¤„ç†** åˆ†ç¦»

### å¸¸è§é”™è¯¯å¯¹ç…§

```python
except ValueError:
    pass        # âŒï¸ é™é»˜åå¼‚å¸¸
```

```python
except ValueError as e:
    log(e)      # âœ…ï¸ è‡³å°‘è®°å½•
```

### é€ŸæŸ¥æç¤º

- âœ…ï¸ ç²¾ç¡®æ•è·å¼‚å¸¸ç±»å‹
- â— ä¸è¦ç”¨å¼‚å¸¸åšæµç¨‹æ§åˆ¶
- âœ…ï¸ ä½¿ç”¨å¼‚å¸¸è¡¨è¾¾â€œå¼‚å¸¸æƒ…å†µâ€
- â— `finally`ä¸€å®šä¼šæ‰§è¡Œï¼ˆé™¤éè¿›ç¨‹ç»ˆæ­¢ï¼‰

---

## æ´»é¡µ09ï¼šæ–‡ä»¶ä¸ä¸Šä¸‹æ–‡ç®¡ç†å™¨

### æ‰“å¼€æ–‡ä»¶ï¼š`open()`

```python
f = open(path, mode="r", encoding="utf-8")
```

#### å¸¸ç”¨å‚æ•°

| å‚æ•°       | è¯´æ˜     |
| ---------- | -------- |
| `path`     | æ–‡ä»¶è·¯å¾„ |
| `mode`     | æ‰“å¼€æ¨¡å¼ |
| `encoding` | æ–‡æœ¬ç¼–ç  |

### æ‰“å¼€æ¨¡å¼å¯¹ç…§è¡¨

| æ¨¡å¼ | å«ä¹‰               |
| ---- | ------------------ |
| `r`  | åªè¯»ï¼ˆé»˜è®¤ï¼‰       |
| `w`  | å†™å…¥ï¼ˆæ¸…ç©ºåŸå†…å®¹ï¼‰ |
| `a`  | è¿½åŠ                |
| `x`  | æ–°å»ºï¼Œå­˜åœ¨åˆ™å¤±è´¥   |
| `b`  | äºŒè¿›åˆ¶æ¨¡å¼         |
| `t`  | æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰   |
| `+`  | è¯»å†™               |

```python
open("a.txt", "rb")
open("a.txt", "w+", encoding="utf-8")
```

### è¯»å–æ–‡ä»¶

```python
f.read()
f.readline()
f.readlines()
```

```python
for line in f:
    ...
```

### å†™å…¥æ–‡ä»¶

```python
f.write("hello\n")
f.writelines(lines)
```

> ğŸ“Œ `write()`ä¸ä¼šè‡ªåŠ¨æ¢è¡Œ

### ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼š`with`

```python
with open("a.txt", "r", encoding="utf-8") as f:
    data = f.read()
```

- è‡ªåŠ¨å…³é—­èµ„æº
- å³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿèƒ½æ¸…ç†

### `with`çš„æœ¬è´¨ï¼ˆç®€åŒ–ï¼‰

```python
obj.__enter__()
...
obj.__exit__(exc_type, exc, tb)
```

> ğŸ“Œ ä»»ä½•å®ç°è¯¥åè®®çš„å¯¹è±¡éƒ½å¯ç”¨äº`with`

### æ–‡æœ¬ vs äºŒè¿›åˆ¶ï¼ˆé‡ç‚¹ï¼‰

| æ–‡æœ¬æ¨¡å¼   | äºŒè¿›åˆ¶æ¨¡å¼   |
| ---------- | ------------ |
| `str`      | `bytes`      |
| æœ‰ç¼–ç      | æ— ç¼–ç        |
| è·¨å¹³å°æ¢è¡Œ | åŸå§‹å­—èŠ‚     |

```python
open("img.png", "rb")
```

### ç¼–ç é—®é¢˜é€ŸæŸ¥

- âœ…ï¸ æ˜ç¡®æŒ‡å®š `encoding`
- âœ…ï¸ æ¨è UTF-8
- â— Windows é»˜è®¤ç¼–ç å¯èƒ½ä¸åŒ
- â— è§£ç å¤±è´¥ â†’ `UnicodeDecodeError`

### å¸¸è§é”™è¯¯å¯¹ç…§

```python
f = open("a.txt")
data = f.read()
# å¿˜è®°å…³é—­æ–‡ä»¶ âŒï¸
```

```python
with open("a.txt") as f:
    data = f.read()   # âœ…ï¸
```

### é€ŸæŸ¥æç¤º

- âœ…ï¸ å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ `with`
- âœ…ï¸ æ–‡æœ¬å¤„ç†ç”¨ `t`ï¼ŒäºŒè¿›åˆ¶ç”¨ `b`
- â— ä¸è¦æ‰‹åŠ¨æ··åˆ `str` ä¸ `bytes`
- â— å†™æ–‡ä»¶å‰ç¡®è®¤æ¨¡å¼æ˜¯å¦ä¼šè¦†ç›–å†…å®¹

---

## æ´»é¡µ10ï¼šå¸¸ç”¨å†…ç½®å‡½æ•°ä¸ I/O é€ŸæŸ¥

### åºåˆ—ä¸é•¿åº¦

```python
len(x)
```

- è¿”å›å…ƒç´ ä¸ªæ•°
- æ”¯æŒåºåˆ—ã€æ˜ å°„ã€é›†åˆ

### æ•°å€¼ä¸èŒƒå›´

```python
range(stop)
range(start, stop, step)
```

- æƒ°æ€§åºåˆ—
- å¸¸ä¸`for`æ­é…

### ç´¢å¼•ä¸è®¡æ•°

```python
enumerate(iterable, start=0)
```

```python
for i, v in enumerate(xs):
    ...
```

- æ›¿ä»£ `range(len(xs))`

### å¹¶è¡Œéå†

```python
zip(a, b)
```

```python
for x, y in zip(xs, ys):
    ...
```

- ä»¥æœ€çŸ­åºåˆ—ä¸ºå‡†

### æ˜ å°„ä¸è¿‡æ»¤

```python
map(func, iterable)
filter(func, iterable)
```

- è¿”å›è¿­ä»£å™¨
- å¸¸è¢«æ¨å¯¼å¼æ›¿ä»£

### æ’åº

```python
sorted(iterable)
sorted(iterable, key=func, reverse=True)
```

```python
lst.sort()   # åŸåœ°
```

### èšåˆåˆ¤æ–­

```python
any(iterable)
all(iterable)
```

- `any`ï¼šå­˜åœ¨ True
- `all`ï¼šå…¨éƒ¨ True

### æ§åˆ¶å°è¾“å…¥ï¼š`input()`

```python
s = input("Enter value: ")
```

- è¿”å› `str`
- éœ€æ‰‹åŠ¨è½¬æ¢ç±»å‹

```python
n = int(input())
```

### æ§åˆ¶å°è¾“å‡ºï¼š`print()`

```python
print(a, b, sep=", ", end="\n")
```

| å‚æ•°   | ä½œç”¨     |
| ------ | -------- |
| `sep`  | åˆ†éš”ç¬¦   |
| `end`  | ç»“å°¾å­—ç¬¦ |
| `file` | è¾“å‡ºç›®æ ‡ |

```python
print(msg, file=sys.stderr)
```

### è¾“å‡ºè½¬æ¢ä¸æ˜¾ç¤º

#### å­—ç¬¦ä¸²åŒ–

```python
str(x)
repr(x)
```

| å‡½æ•°   | ç”¨é€”       |
| ------ | ---------- |
| `str`  | é¢å‘ç”¨æˆ·   |
| `repr` | é¢å‘å¼€å‘è€… |

### æ ¼å¼åŒ–è¾“å‡º

#### `format()`

```python
"{:.2f}".format(3.14159)
```

#### f-stringï¼ˆæ¨èï¼‰

```python
f"{name} = {value:.2f}"
```

- Python 3.6+
- å¯ç›´æ¥å†™è¡¨è¾¾å¼

### å¸¸è§é”™è¯¯å¯¹ç…§

```python
print = 10     # âŒï¸ è¦†ç›–å†…ç½®å‡½æ•°
```

```python
n = input() + 1   # âŒï¸ ç±»å‹é”™è¯¯
```

```python
n = int(input()) + 1   # âœ…ï¸
```

### é€ŸæŸ¥æç¤º

- âœ…ï¸ é¿å…è¦†ç›–å†…ç½®å‡½æ•°å
- âœ…ï¸ f-string æ˜¯é¦–é€‰æ ¼å¼åŒ–æ–¹å¼
- â— `input()`æ°¸è¿œè¿”å›å­—ç¬¦ä¸²
- â— `map / filter`è¿”å›è¿­ä»£å™¨

---

## æ´»é¡µ11ï¼šæ¨å¯¼å¼ä¸ç”Ÿæˆå™¨

### åˆ—è¡¨æ¨å¯¼å¼

```python
[x - 2 for x in data]
```

```python
[x for x in data if x > 0]
```

- æ›´ç®€æ´
- å¯è¯»æ€§é«˜ï¼ˆé€‚åº¦ï¼‰

### å­—å…¸æ¨å¯¼å¼

```python
{k: v for k, v in pairs}
```

```python
{k: v for k, v in pairs if v > 0}
```

### é›†åˆæ¨å¯¼å¼

```python
{x for x in data}
```

- è‡ªåŠ¨å»é‡

### ç”Ÿæˆå™¨è¡¨è¾¾å¼

```python
(x - 2 for x in data)
```

- è¿”å›ç”Ÿæˆå™¨å¯¹è±¡
- **æƒ°æ€§æ±‚å€¼**

```python
gen = (x for x in range(10))
next(gen)
```

### æ¨å¯¼å¼ vs ç”Ÿæˆå™¨ï¼ˆæ ¸å¿ƒå¯¹æ¯”ï¼‰

| é¡¹ç›®           | æ¨å¯¼å¼              | ç”Ÿæˆå™¨      |
| -------------- | ------------------- | ----------- |
| è¿”å›ç±»å‹       | `list / dict / set` | `generator` |
| æ˜¯å¦ä¸€æ¬¡æ€§ç”Ÿæˆ | âœ…ï¸                  | âŒï¸          |
| å†…å­˜å ç”¨       | è¾ƒé«˜                | ä½          |
| æ˜¯å¦å¯å¤ç”¨     | âœ…ï¸                  | âŒï¸ï¼ˆä¸€æ¬¡ï¼‰  |

### å¤šé‡å¾ªç¯å†™æ³•

```python
[(x, y) for x in xs for y in ys]
```

ç­‰ä»·äºï¼š

```python
for x in xs:
    for y in ys:
        ...
```

### æ¡ä»¶ç»„åˆ

```python
[x for x in data if x > 0 if x % 2 == 0]
```

### ç”Ÿæˆå™¨å‡½æ•°ï¼š`yield`

```python
def count_up(n):
    i = 0
    while i < n:
        yield i
        i += 1
```

```python
for x in count_up(3):
    ...
```

- æ¯æ¬¡`yield`æš‚åœæ‰§è¡Œ
- ä¿ç•™å‡½æ•°çŠ¶æ€

### `yield` vs `return`

```python
return x   # ç»“æŸå‡½æ•°
yield x    # æš‚åœå‡½æ•°
```

### å¸¸è§é”™è¯¯å¯¹ç…§

```python
(x for x in data)    # âœ…ï¸ ç”Ÿæˆå™¨
[x for x in data]    # âœ…ï¸ åˆ—è¡¨
```

```python
(x for x in data)[0] # âŒï¸ ä¸èƒ½ç´¢å¼•
```

### ä½¿ç”¨åœºæ™¯å»ºè®®

- âœ…ï¸ å°æ•°æ® + éœ€è¦ç»“æœ â†’ æ¨å¯¼å¼
- âœ…ï¸ å¤§æ•°æ® / æµå¼å¤„ç† â†’ ç”Ÿæˆå™¨
- â— å¤æ‚é€»è¾‘ä¸è¦ç¡¬å¡è¿›æ¨å¯¼å¼

### é€ŸæŸ¥æç¤º

- âœ…ï¸ æ¨å¯¼å¼æ˜¯è¡¨è¾¾å¼ï¼Œä¸æ˜¯è¯­å¥
- âœ…ï¸ ç”Ÿæˆå™¨åªèƒ½éå†ä¸€æ¬¡
- â— å¯è¯»æ€§ä¼˜å…ˆäºâ€œç‚«æŠ€â€

---

## æ´»é¡µ12ï¼šè£…é¥°å™¨ä¸å¸¸è§é«˜çº§è¯­æ³•

### è£…é¥°å™¨çš„æœ¬è´¨

> è£…é¥°å™¨ = æ¥æ”¶å‡½æ•° â†’ è¿”å›æ–°å‡½æ•°çš„å‡½æ•°

```python
def deco(func):
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper
```

### åŸºæœ¬ç”¨æ³•

```python
@deco
def f():
    ...
```

ç­‰ä»·äºï¼š

```python
f = deco(f)
```

### ä¿ç•™åŸå‡½æ•°ä¿¡æ¯ï¼š`functools.wraps`

```python
from functools import wraps

def deco(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper
```

- ä¿ç•™`__name__`
- ä¿ç•™`__doc__`

### å¸¦å‚æ•°çš„è£…é¥°å™¨

```python
def deco(arg):
    def inner(func):
        def wrapper(*args, **kwargs):
            return func(*args, **kwargs)
        return wrapper
    return inner
```

```python
@deco(10)
def f():
    ...
```

### å¤šä¸ªè£…é¥°å™¨çš„æ‰§è¡Œé¡ºåºï¼ˆé‡ç‚¹ï¼‰

```python
@a
@b
def f():
    ...
```

ç­‰ä»·äºï¼š

```python
f = a(b(f))
```

- **é è¿‘å‡½æ•°çš„å…ˆæ‰§è¡Œ**

### å¸¸è§å†…ç½®è£…é¥°å™¨

```python
@staticmethod
@classmethod
@property
```

| è£…é¥°å™¨          | ç”¨é€”           |
| --------------- | -------------- |
| `@staticmethod` | æ— å®ä¾‹ã€æ— ç±»   |
| `@classmethod`  | æ¥æ”¶ `cls`     |
| `@property`     | å±æ€§å¼è®¿é—®     |

### é—­åŒ…ï¼ˆClosureï¼‰

```python
def outer(x):
    def inner():
        return x
    return inner
```

- æ•è·å¤–éƒ¨ä½œç”¨åŸŸå˜é‡
- å¸¸ä¸è£…é¥°å™¨é…åˆ

### ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆé«˜çº§ç”¨æ³•ï¼‰

```python
from contextlib import contextmanager

@contextmanager
def ctx():
    ...
    yield
    ...
```

- ç”¨å‡½æ•°æ–¹å¼å®ç° `with`

### `dataclass`ï¼ˆç»“æ„åŒ–æ•°æ®ï¼‰

```python
from dataclasses import dataclass

@dataclass
class Point:
    x: int
    y: int
```

- è‡ªåŠ¨ç”Ÿæˆ`__init__`
- è‡ªåŠ¨ç”Ÿæˆ`__repr__`

### å¸¸è§è¯¯åŒºå¯¹ç…§

```python
@deco
f()     # âŒï¸ è£…é¥°å™¨ä¿®é¥°å‡½æ•°ï¼Œä¸æ˜¯è°ƒç”¨
```

```python
@deco()
def f():    # âš ï¸ åªæœ‰å½“ deco è¿”å›è£…é¥°å™¨æ—¶æ‰åˆæ³•
```

### é€ŸæŸ¥æç¤º

- âœ…ï¸ è£…é¥°å™¨æœ¬è´¨æ˜¯å‡½æ•°æ›¿æ¢
- âœ…ï¸ æ°¸è¿œä½¿ç”¨`@wraps`
- â— å¤šè£…é¥°å™¨æ³¨æ„æ‰§è¡Œé¡ºåº
- â— ä¸è¦æ»¥ç”¨è£…é¥°å™¨å¢åŠ å¤æ‚åº¦

---
